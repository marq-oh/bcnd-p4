exports.id=0,exports.modules={"./src/server/server.js":function(e,t,o){"use strict";o.r(t);var n=o("./build/contracts/FlightSuretyApp.json"),r=o("./build/contracts/FlightSuretyData.json"),s=o("./src/server/config.json"),c=o("web3"),a=o.n(c),l=o("express"),i=o.n(l),u=s.localhost,d=new a.a(new a.a.providers.WebsocketProvider(u.url.replace("http","ws")));d.eth.defaultAccount=d.eth.accounts[0];var h=new d.eth.Contract(n.abi,u.appAddress),f=new d.eth.Contract(r.abi,u.dataAddress),g=[0,10,20,30,40,50],p=[];d.eth.getAccounts().then((function(e){console.log("length :"+e.length),f.methods.authorizeCaller(u.appAddress).send({from:e[0]}).then((function(e){console.log("appAddress registered as the authorized contract of dataContract")})).catch((function(e){console.log("Error in authorizing appcontract. "+e)})),h.methods.REGISTRATION_FEE().call().then((function(t){for(var o=function(o){h.methods.registerOracle().send({from:e[o],value:t,gas:4e6}).then((function(t){h.methods.getMyIndexes().call({from:e[o]}).then((function(t){p[e[o]]=t,console.log("Oracle registered: "+e[o]+" indices:"+t)}))})).catch((function(t){console.log("Error while registering oracles: "+e[o]+" Error: "+t)}))},n=1;n<20;n++)o(n)}))})),h.events.FlightStatusInfo({fromBlock:0},(function(e,t){e?console.log(e):console.log("Received flightstatusInfo event:  "+JSON.stringify(t))})),h.events.OracleRequest({fromBlock:0},(function(e,t){e?console.log(e):function(){for(var e=t.returnValues.index,o=t.returnValues.airline,n=t.returnValues.flight,r=t.returnValues.timestamp,s=g[Math.floor(Math.random()*g.length)],c=function(t){p[t].index.includes(e)&&h.methods.submitOracleResponse(e,o,n,r,s).send({from:p[t].address},(function(e,o){e?console.log(e):console.log("".concat(JSON.stringify(p[t]),": Status code ").concat(s))}))},a=0;a<p.length;a++)c(a)}()}));var m=i()();m.get("/api",(function(e,t){t.send({message:"An API for use with your Dapp!"})})),t.default=m}};