exports.id=0,exports.modules={"./src/server/server.js":function(e,n,r){"use strict";r.r(n);var t=r("./build/contracts/FlightSuretyApp.json"),o=r("./src/server/config.json"),c=r("web3"),s=r.n(c),a=r("express"),u=r.n(a);function i(e,n,r,t,o,c,s){try{var a=e[c](s),u=a.value}catch(e){return void r(e)}a.done?n(u):Promise.resolve(u).then(t,o)}function l(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var c=e.apply(n,r);function s(e){i(c,t,o,s,a,"next",e)}function a(e){i(c,t,o,s,a,"throw",e)}s(void 0)}))}}var f=o.localhost,p=new s.a(new s.a.providers.WebsocketProvider(f.url.replace("http","ws"))),g=new p.eth.Contract(t.abi,f.appAddress),d=function(){return Math.random()>.5?20:10*Math.floor(5*Math.random())};console.log("RANDOM CODE: ",d());var h={0:"UNKNOWN",10:"ON TIME",20:"LATE AIRLINE",30:"LATE WEATHER",40:"LATE TECHNICAL",50:"LATE OTHER"};l(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.eth.getAccounts(function(){var e=l(regeneratorRuntime.mark((function e(n,r){var t,o,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&console.log("[ERROR] ",n),p.eth.defaultAccount=r[0],e.next=4,p.eth.getBalance(r[0]);case 4:return t=e.sent,console.log(r[0],t),e.next=8,g.methods.REGISTRATION_FEE().call({from:r[0]});case 8:o=e.sent,c=0;case 10:if(!(c<20)){e.next=20;break}return e.next=13,g.methods.registerOracle().send({from:r[c],value:o,gas:3e6}).catch((function(e){return console.log(e)}));case 13:return e.next=15,g.methods.getMyIndexes().call({from:r[c],gas:3e6}).catch((function(e){return console.log(e)}));case 15:s=e.sent,console.log("[".concat(c,"] Oracle Registered: ").concat(s[0],", ").concat(s[1],", ").concat(s[2]));case 17:c++,e.next=10;break;case 20:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.next=5,g.events.OracleRequest({fromBlock:0},function(){var e=l(regeneratorRuntime.mark((function e(r,t){var o,c,s,a,u,i,l,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&console.log(r),o=t.returnValues,c=o.index,o.airline,s=o.flight,a=o.timestamp,u=1;case 3:if(!(u<20)){e.next=27;break}return e.next=6,g.methods.getMyIndexes().call({from:n[u]});case 6:i=e.sent,l=0;case 8:if(!(l<3)){e.next=24;break}return e.prev=9,f=d(),e.next=13,g.methods.submitOracleResponse(i[l],n[0],s,a,f).send({from:n[u],gas:3e6});case 13:console.log("[".concat(u,"]"),"\nSuccess",l,i[l],s,a,"|*| ".concat(h[f]," |*|")),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(9),p=i[l],console.log("[".concat(u,"]"),"\nError",l,p,s,a),c==p&&console.log("[ERROR] ",e.t0);case 21:l++,e.next=8;break;case 24:u++,e.next=3;break;case 27:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(n,r){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})))();var m=u()();m.get("/api",(function(e,n){n.send({message:"An API for use with your Dapp!"})})),n.default=m},express:function(e,n){e.exports=require("express")}};